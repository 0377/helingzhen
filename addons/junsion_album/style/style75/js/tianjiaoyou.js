function EVA_ALBUM_tianjiaoyou(t){function a(){h()}function e(t,a,e,n){var o=new Image;o.onload=function(){t.src=n;var r=calcImgClip(a,e,o.width,o.height);t.style.left=0-r.clipLeft+"px",t.style.top=0-r.clipTop+"px",t.style.width=r.objWidth+"px",t.style.height=r.objHeight+"px",t.style.clip="rect("+r.clipTop+"px "+Math.floor(r.clipLeft+a)+"px "+Math.floor(r.clipTop+e)+"px "+r.clipLeft+"px)"},o.src=n}function n(){var t=["bkgnd1.jpg","bkgnd2.jpg","bkgnd3.jpg","bkgnd4.jpg"],a=null,n=null,s=$node("tianjiaoyou_bkgnd").getElementsByTagName("img");hasClass(s[0],"tianjiaoyou_bkgnd_show")?(a=s[0],n=s[1]):(a=s[1],n=s[0]);var i=T++%t.length;e(n,o,r,APP_URL+t[i]),n.className="tianjiaoyou_bkgnd_show",a.className="tianjiaoyou_bkgnd_hide",n.style.opacity=1,a.style.opacity=0}var o=t.max_width,r=t.max_height,s=!1,i=0,l=[],d=$node(t.canvas_id),c=null,m=document.createElement("div");m.id="EVA_ALBUM_tianjiaoyou",m.style.width=o+"px",m.style.height=r+"px",m.innerHTML='<div id="tianjiaoyou_bkgnd"><img><img></div><div id="tianjiaoyou_Images"></div>',d.appendChild(m),loadCSSFile(APP_URL+"/main.css?t=20150802",a,a,"EVA_ALBUM_tianjiaoyou_Check_Loaded");var h=function(){if(1==s)return void console.log("warning,re init");s=!0;for(var t=$node("tianjiaoyou_Images"),a=0;9>a;++a){var e=document.createElement("div");e.className="tianjiaoyou_image_wrapper",e.innerHTML="<img >",e.style.left="0",e.style.top="0",e.style.width=o+"px",e.style.height=r+"px",t.appendChild(e)}p(null,y()),l.push(new tianjiaoyouScene1("tianjiaoyou_Images",o,r,u)),l.push(new tianjiaoyouScene2("tianjiaoyou_Images",o,r,u)),l.push(new tianjiaoyouScene3("tianjiaoyou_Images",o,r,u)),l.push(new tianjiaoyouScene4("tianjiaoyou_Images",o,r,u))},p=function(t,a){for(var n=$node("tianjiaoyou_Images"),s=n.getElementsByClassName("tianjiaoyou_image_wrapper"),i=parseInt(Math.random()*(s.length-1)),l=null,d=0,c=0;c<s.length;++c){var m=s[c];if(m!=t){var h=null;d==i?(h=a,l=m):h=y();var p=m.getElementsByTagName("img")[0];e(p,o,r,h.src),d++}}return l},y=function(){return i>=g_images.length?i=0:0>i&&(i=0),g_images.length<1?null:g_images[i++]},u=function(){window.setTimeout(M,5e3)},g=0,f=-1,x=function(){return f++,f>=l.length&&(f=0),l[f]},M=function(){g++%2==0&&n(),c=p(c,y());var t=x();t.show(c)};this.stop=function(){},this.play=function(){m.style.display="block",i=0;var t=window.setInterval(function(){s===!0&&(window.clearInterval(t),M())},20)},this.setBkgnd=function(t){};var T=0}function tianjiaoyou_SCENE_EXTEND(t,a){t.prototype=new a,t.prototype.constructor=t}function tianjiaoyouSceneBase(){this.imgScene=null,this.canvasWidth=0,this.canvasHeight=0,this.callbackFrameEnd=null,this.actionEnter=null,this.actionLeave=null,this.actionShowCurrent=null,this.actionHideCurrent=null,this.current_display_image=null}function tianjiaoyouScene1(t,a,e,n){for(var o=$node(t).getElementsByClassName("tianjiaoyou_image_wrapper"),r=[],s=.8*a,i=1.1*e,l=0;l<o.length;l++){var d={};d.x=l%2*2*s-s,d.y=2*-(Math.floor(l/2)%2)*i+i,d.z=1500*Math.floor(l/4)-4500,r.push(d)}r[o.length-1]={x:0,y:0,z:-3e3};var c=function(t,n){t.style.display="block",t.style.opacity=0;var o=[[0-a+500*Math.random(),0],[0-a+500*Math.random(),e],[0,0-e+500*Math.random()],[a,0-e+500*Math.random()]],s=o[parseInt(Math.random()*o.length)],i=-4500-100*Math.random();$transform(t,"translate3d("+s[0]+"px, "+s[1]+"px,"+i+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01)"),function(t,a){setTimeout(function(){var e=r[a],n=e.z,o=.8,s=" scale3d("+o+","+o+",1)",i=" rotateY("+(15-30*Math.random())+"deg)";t.style.opacity=.8,t.style.zIndex=0,$transform(t,"translate3d("+e.x+"px, "+e.y+"px,"+n+"px)"+s+i)},50+50*a)}(t,n)},m=function(t,n){window.setTimeout(function(){t.style.display="block",t.style.opacity=0,t.style.zIndex=0;var n=[[0-a+1500*Math.random(),0],[0-a+1500*Math.random(),e],[0,0-e+1500*Math.random()],[a,0-e+1500*Math.random()]],o=n[parseInt(Math.random()*n.length)],r=-500-100*Math.random();$transform(t,"translate3d("+o[0]+"px, "+o[1]+"px,"+r+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01)")},50*n)},h=function(t,a){var e=r[a],n=.5,o=" scale3d("+n+","+n+",1)",s=" rotateY("+(15-30*Math.random())+"deg)";t.style.opacity=.8,t.style.zIndex=0,$transform(t,"translate3d("+e.x+"px, "+e.y+"px,"+e.z+"px)"+o+s)},p=function(t,a){window.setTimeout(function(){t.style.opacity=1,t.style.zIndex=1,$transform(t,"scale3d(.9,.9,.9)")},800)};this.params(t,a,e,n,c,m,p,h)}function tianjiaoyouScene2(t,a,e,n){for(var o=$node(t).getElementsByClassName("tianjiaoyou_image_wrapper"),r=[],s=.8*a,i=1.1*e,l=0;l<o.length;l++){var d={};d.x=l%2*2*s-s,d.y=2*-(Math.floor(l/2)%2)*i+i,d.z=1500*Math.floor(l/4)-4500,r.push(d)}r[o.length-1]={x:0,y:0,z:-3e3};var c=function(t,n){t.style.display="block",t.style.opacity=0;var o=[[0-a+500*Math.random(),0],[0-a+500*Math.random(),e],[0,0-e+500*Math.random()],[a,0-e+500*Math.random()]],s=o[parseInt(Math.random()*o.length)],i=1500;$transform(t,"translate3d("+s[0]+"px, "+s[1]+"px,"+i+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01)"),function(t,a){setTimeout(function(){var e=r[a],n=e.z,o=.7,s=" scale3d("+o+","+o+",1)",i=" rotateY("+(15-30*Math.random())+"deg)";t.style.opacity=.8,t.style.zIndex=0,$transform(t,"translate3d("+e.x+"px, "+e.y+"px,"+n+"px)"+s+i)},50+50*a)}(t,n)},m=function(t,n){window.setTimeout(function(){t.style.display="block",t.style.opacity=0,t.style.zIndex=0;var n=[[0-a+1500*Math.random(),0],[0-a+1500*Math.random(),e],[0,0-e+1500*Math.random()],[a,0-e+1500*Math.random()]],o=n[parseInt(Math.random()*n.length)],r=-500-100*Math.random();$transform(t,"translate3d("+o[0]+"px, "+o[1]+"px,"+r+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01)")},50*n)},h=function(t,a){var e=r[a],n=.5,o=" scale3d("+n+","+n+",1)",s=" rotateY("+(15-30*Math.random())+"deg)";t.style.opacity=.8,t.style.zIndex=0,$transform(t,"translate3d("+e.x+"px, "+e.y+"px,"+e.z+"px)"+o+s)},p=function(t,a){window.setTimeout(function(){t.style.opacity=1,t.style.zIndex=1,$transform(t,"scale3d(.9,.9,.9)")},800)};this.params(t,a,e,n,c,m,p,h)}function tianjiaoyouScene3(t,a,e,n){var o=function(t,n){t.style.display="block",t.style.opacity=0;var o=[[0-a+500*Math.random(),0],[0-a+500*Math.random(),e],[0,0-e+500*Math.random()],[a,0-e+500*Math.random()]],r=o[parseInt(Math.random()*o.length)],s=500;$transform(t,"translate3d("+r[0]+"px, "+r[1]+"px,"+s+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01)"),function(t,a){setTimeout(function(){var a=-800,e=.5,n=" scale3d("+e+","+e+",1)",o=" rotate("+450*Math.random()+"deg)";t.style.opacity=.8,t.style.zIndex=0,$transform(t,"translate3d(0px,0px,"+a+"px)"+n+o)},50+100*a)}(t,n)},r=function(t,n){window.setTimeout(function(){t.style.display="block",t.style.opacity=0,t.style.zIndex=0;var n=[[0-a+1500*Math.random(),0],[0-a+1500*Math.random(),e],[0,0-e+1500*Math.random()],[a,0-e+1500*Math.random()]],o=n[parseInt(Math.random()*n.length)],r=-500-100*Math.random();$transform(t,"translate3d("+o[0]+"px, "+o[1]+"px,"+r+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01) rotateX("+90*Math.random()+"deg) rotateY("+90*Math.random()+"deg)")},150*n)},s=function(t,a){var e=.5,n=" scale3d("+e+","+e+",1)",o=" rotate("+450*Math.random()+"deg)";t.style.opacity=.8,t.style.zIndex=0,$transform(t,"translate3d(0px, 0px,-800px)"+n+o)},i=function(t,a){window.setTimeout(function(){t.style.opacity=1,t.style.zIndex=1,$transform(t,"scale3d(.9,.9,.9)")},800)};this.params(t,a,e,n,o,r,i,s)}function tianjiaoyouScene4(t,a,e,n){var o=function(t,n){t.style.display="block",t.style.opacity=0;var o=[[0-a+500*Math.random(),0],[0-a+500*Math.random(),e],[0,0-e+500*Math.random()],[a,0-e+500*Math.random()]],r=o[parseInt(Math.random()*o.length)],s=500;$transform(t,"translate3d("+r[0]+"px, "+r[1]+"px,"+s+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01)"),function(t,a){setTimeout(function(){var e=.333,n=" scale3d("+e+","+e+",1)",o=-33.3+a%3*33.3,r=-33.3+33.3*parseInt(a/3);t.style.opacity=.8,t.style.zIndex=1,$transform(t,"translate3d("+o+"%, "+r+"%, -200px)"+n)},50+50*a)}(t,n)},r=function(t,n){window.setTimeout(function(){t.style.display="block",t.style.opacity=0,t.style.zIndex=0;var n=[[0-a+1500*Math.random(),0],[0-a+1500*Math.random(),e],[0,0-e+1500*Math.random()],[a,0-e+1500*Math.random()]],o=n[parseInt(Math.random()*n.length)],r=-500-100*Math.random();$transform(t,"translate3d("+o[0]+"px, "+o[1]+"px,"+r+"px) rotate("+90*Math.random()+"deg) scale3d(.01,.01,.01) rotateX("+90*Math.random()+"deg) rotateY("+90*Math.random()+"deg)")},150*n)},s=function(t,a){var e=.333,n=" scale3d("+e+","+e+",1)",o=-33.3+a%3*33.3,r=-33.3+33.3*parseInt(a/3);t.style.opacity=.8,t.style.zIndex=0,$transform(t,"translate3d("+o+"%, "+r+"%, -200px)"+n)},i=function(t,a){window.setTimeout(function(){t.style.opacity=1,t.style.zIndex=1,$transform(t,"scale3d(.9,.9,.9)")},800)};this.params(t,a,e,n,o,r,i,s)}tianjiaoyouSceneBase.prototype.params=function(t,a,e,n,o,r,s,i){this.imgScene=t,this.canvasWidth=a,this.canvasHeight=e,this.callbackFrameEnd=n,this.actionEnter=o,this.actionLeave=r,this.actionShowCurrent=s,this.actionHideCurrent=i},tianjiaoyouSceneBase.prototype.show=function(t){for(var a=$node(this.imgScene).getElementsByClassName("tianjiaoyou_image_wrapper"),e=0;e<a.length;++e){var n=a[e];n==this.current_display_image?this.actionHideCurrent(n,e):this.actionEnter(n,e)}this.current_display_image=t;var o=this;window.setTimeout(function(){for(var e=0;e<a.length;++e){var n=a[e];n==t?o.actionShowCurrent(n,e):o.actionLeave(n,e)}o.callbackFrameEnd()},3800)},tianjiaoyou_SCENE_EXTEND(tianjiaoyouScene1,tianjiaoyouSceneBase),tianjiaoyou_SCENE_EXTEND(tianjiaoyouScene2,tianjiaoyouSceneBase),tianjiaoyou_SCENE_EXTEND(tianjiaoyouScene3,tianjiaoyouSceneBase),tianjiaoyou_SCENE_EXTEND(tianjiaoyouScene4,tianjiaoyouSceneBase);